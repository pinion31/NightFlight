{"version":3,"sources":["../server/server.js"],"names":["yelp","require","clientId","process","env","CLIENT_ID_YELP","clientSecret","CLIENT_KEY_YELP","app","use","static","json","post","req","res","console","log","dir","body","query","accessToken","then","client","response","jsonBody","access_token","searchRequest","term","location","search","JSON","stringify","businesses","catch","e","get","send","listen"],"mappings":"AAAA;;AAEA;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,IAAMA,OAAOC,QAAQ,aAAR,CAAb;;AAEA,IAAMC,WAAWC,QAAQC,GAAR,CAAYC,cAA7B;AACA,IAAMC,eAAeH,QAAQC,GAAR,CAAYG,eAAjC;;AAMA,IAAMC,MAAM,wBAAZ;;AAEAA,IAAIC,GAAJ,CAAQ,kBAAQC,MAAR,CAAe,QAAf,CAAR;AACAF,IAAIC,GAAJ,CAAQ,qBAAWE,IAAX,EAAR;;AAEAH,IAAII,IAAJ,CAAS,OAAT,EAAkB,UAACC,GAAD,EAAMC,GAAN,EAAc;AAC9BC,UAAQC,GAAR,CAAY,SAAZ;AACAD,UAAQE,GAAR,CAAYJ,IAAIK,IAAJ,CAASC,KAArB;;AAEAnB,OAAKoB,WAAL,CAAiBlB,QAAjB,EAA2BI,YAA3B,EAAyCe,IAAzC,CAA8C,oBAAY;AAC1D,QAAMC,SAAStB,KAAKsB,MAAL,CAAYC,SAASC,QAAT,CAAkBC,YAA9B,CAAf;;AAEA,QAAMC,gBAAgB;AACpBC,YAAK,WADe;AAEpBC,gBAAUf,IAAIK,IAAJ,CAASC;AAFC,KAAtB;;AAKAG,WAAOO,MAAP,CAAcH,aAAd,EAA6BL,IAA7B,CAAkC,oBAAY;AAC5C;AACA;AACAN,cAAQE,GAAR,CAAYa,KAAKC,SAAL,CAAeR,SAASC,QAAT,CAAkBQ,UAAjC,CAAZ;AACAlB,UAAIH,IAAJ,CAASmB,KAAKC,SAAL,CAAeR,SAASC,QAAT,CAAkBQ,UAAjC,CAAT;AACC,KALH;AAMC,GAdD,EAcGC,KAdH,CAcS,aAAK;AACZlB,YAAQC,GAAR,CAAYkB,CAAZ;AACD,GAhBD;AAiBD,CArBD;;AAuBA1B,IAAI2B,GAAJ,CAAQ,GAAR,EAAa,UAACtB,GAAD,EAAMC,GAAN,EAAc;AACvBA,MAAIsB,IAAJ,CAAS,UAAT;AACD,CAFH;AAGA5B,IAAI6B,MAAJ,CAAW,IAAX,EAAiB,YAAM;AACrBtB,UAAQC,GAAR,CAAY,0BAAZ;AAED,CAHD","file":"server.js","sourcesContent":["'use strict';\r\n\r\nimport 'babel-polyfill';\r\nimport SourceMapSupport from 'source-map-support';\r\nimport express from 'express';\r\nimport bodyParser from 'body-parser';\r\n\r\nconst yelp = require('yelp-fusion');\r\n\r\nconst clientId = process.env.CLIENT_ID_YELP;\r\nconst clientSecret = process.env.CLIENT_KEY_YELP;\r\n\r\n\r\n\r\n\r\n\r\nconst app = express();\r\n\r\napp.use(express.static('static'));\r\napp.use(bodyParser.json());\r\n\r\napp.post('/list', (req, res) => {\r\n  console.log('getting');\r\n  console.dir(req.body.query);\r\n\r\n  yelp.accessToken(clientId, clientSecret).then(response => {\r\n  const client = yelp.client(response.jsonBody.access_token);\r\n\r\n  const searchRequest = {\r\n    term:'nightlife',\r\n    location: req.body.query,\r\n  };\r\n\r\n  client.search(searchRequest).then(response => {\r\n    //const results = response.jsonBody.businesses[0];\r\n    //const prettyJson = JSON.stringify(response.jsonBody.businesses[0]);\r\n    console.dir(JSON.stringify(response.jsonBody.businesses));\r\n    res.json(JSON.stringify(response.jsonBody.businesses));\r\n    });\r\n  }).catch(e => {\r\n    console.log(e);\r\n  });\r\n});\r\n\r\napp.get('*', (req, res) => {\r\n    res.send('no match');\r\n  });\r\napp.listen(3000, () => {\r\n  console.log('App started on port 3000');\r\n\r\n});"]}